VKG.SkuList=(function(e,c,g){var a=Object.create(c),f=Object.create(c),b=Object.create(c),d=Object.create(c);a.defaults={parentContainerSel:"#skuListFormID"};a.init=function(h){var i=e.extend({},this.defaults,h);if(this.validate(i)){this.$parentContainer=e(i.parentContainerSel);this.eventListeners();this.loadTooltips()}else{this.Utils.errorHandler(1,"Error Validating general")}};a.validate=function(j){var i,h={};for(i in j){if(j.hasOwnProperty(i)){if((typeof j[i]!=="string")||(e(j[i]).length<=0)){return false}}}return true};a.eventListeners=function(){this.$parentContainer.find("input[type=text]").on("keypress",this.addToCartDefaultSubmitCb);this.$parentContainer.find(".sorter").on("change",this.sortByChangeCb);this.$parentContainer.find(".dealIconImg, .sku_DealTextWrapper").on("mouseenter mouseleave",this.dealIconHoverCb)};a.addToCartDefaultSubmitCb=function(j){var h,i;if((j.which&&j.which===13)||(j.keyCode&&j.keyCode===13)){h=this.id.substring(11,this.id.length);i=e("#skuListFormID").find('input[name="cmd_addCart.button.INDEX['+h+']"]');if(i.length>0){i.click()}return false}else{return true}};a.sortByChangeCb=function(){this.blur()};a.dealIconHoverCb=function(h){if(h.type==="mouseover"||h.type==="mouseenter"){e(this).closest(".skuListProduct").addClass("active")}else{e(this).closest(".skuListProduct").removeClass("active")}};a.loadTooltips=function(){this.$parentContainer.find("span.tabGrid, span.tabList, .skuShoppingListSubmit").tooltip({contentAttr:"title"})};f.defaults={parentContainerSel:"#skuListRefinements"};f.init=function(i){var j=e.extend({},this.defaults,i),h;if(this.validate(j)){h=new Image();h.src="/images/vkg/v4/refinement_loader.gif";this.$parentContainer=e(j.parentContainerSel);this.eventListeners()}else{this.Utils.errorHandler(1,"Error Validating refinements")}};f.validate=function(j){var i,h={};for(i in j){if(j.hasOwnProperty(i)){if((typeof j[i]!=="string")||(e(j[i]).length<=0)){return false}}}return true};f.eventListeners=function(){this.$parentContainer.find(".narrowByLink").on("click",this.narrowByLinkClickCb);this.$parentContainer.find("ul.list_refinement").on("click","li:not(.limore)",this.refinementCheckboxClickCb);this.$parentContainer.on("click",".styleAcc",this.refinementAccordionClickCb);this.$parentContainer.find("a.more").on("click",this.showMoreRefinementsClickCb)};f.narrowByLinkClickCb=function(){throwSearchRefinementElementTag(e("#refinementForm").attr("action"),"Narrow By",e(this).text().trim())};f.refinementCheckboxClickCb=function(l){var n=e(this),j=l.target.tagName.toLowerCase()=="input"?n:n.find("input[type=checkbox]"),h=n.find("a.refinements_checkbox_link"),o=j.parent(),m=j.text().trim(),i=0,k;if(j.prop("checked")){j.prop("checked",false)}else{j.prop("checked",true)}if(coreMetricsEnabled){if(j.prop("checked")){if(m.length<1){m=o.parent().find("img").attr("alt")}k=e("#refinementForm").attr("action");if(typeof k!=="undefined"){throwSearchRefinementElementTag(k,"refinementForm",m)}}}e('<div class="lbTxt">'+e("#refinementsLoading").html()+"</div>").dialog({closeOnEscape:false,dialogId:"loadingDialog",titleBar:{hide:true,hideCloseButton:true},width:270});if(browser.msie||browser.mozilla){i=1850}if(h.length>0){l.preventDefault();h.toggleClass("checked");window.setTimeout(function(){window.location.href=h.prop("href")},i)}else{window.setTimeout(function(){e("#refinementForm").submit()},i)}};f.refinementAccordionClickCb=function(){e(this).toggleClass("accOpen").next().toggle()};f.showMoreRefinementsClickCb=function(k){var l=e(this),i=l.attr("href"),j="",h=l.parent().parent();k.preventDefault();e("body, #skuListRefinement").addClass("cursorWait");l.attr("href","#");h.find("input.refinement").each(function(){j+=this.value+"|"});e.getJSON(common_utils.appendSessionId("/mobile/utils.do?action=getMoreInfo&url="+encodeURIComponent(i)+"&alreadyDisplayed="+j),function(m){h.slideUp(500,function(){var o=m.object,r=o.length,n="",q=0,t,p,s=e("#refinementForm");h.empty();for(;q<r;q++){if(!!o[q].url){n+='<li><a href="'+o[q].url+'" class="refinements_checkbox_link '+((o[q].checked)?" checked":"")+'"><label>'+o[q].name+" ("+o[q].hitCount+")</label></a></li>"}else{n+='<li><input type="checkbox" class="refinement" value="'+o[q].id+'" name="cbxRefine" style="visibility: visible;" '+(o[q].checked?" checked":"")+"/><label>"+o[q].name+" ("+o[q].hitCount+")</label></li>"}}h.append(n);p=s.find("input[type=checkbox]");p.on("click",function(){p.not(":checked").prop("disabled",true);s.find(".refinementSubmit").submit()});l.parent().remove();h.slideDown(500);e("body, #skuListRefinement").removeClass("cursorWait")})})};b.defaults={parentContainerSel:"#skuListContent",skuListProductsSel:"#skuListProducts"};b.elementsToAdjust=[".skuPriceBreak",".skuPricingGridView .abovePriceLine",".skuPricingGridView",".skuListSavings",".skuListSkuDescription",".skuAddToCartWrapperGridView",".shippingCostDisclaimer",".skuDeliveryRule"];b.init=function(h){var i=e.extend({},this.defaults,h);if(this.validate(i)){this.$parentContainer=e(i.parentContainerSel);this.$skuListProducts=e(i.skuListProductsSel);if(this.$skuListProducts.hasClass("grid_view")){this.adjustGridViewHeightCss();this.toggleAddToCartInputNames("grid")}else{this.toggleAddToCartInputNames("list")}this.eventListeners()}else{this.Utils.errorHandler(1,"Error Validating gridListViews")}};b.validate=function(j){var i,h={};for(i in j){if(j.hasOwnProperty(i)){if((typeof j[i]!=="string")||(e(j[i]).length<=0)){return false}}}return true};b.eventListeners=function(){var h=this;h.$parentContainer.find(".gridList").on("click",".tabGrid",function(i){h.gridListViewToggleClickCb(i,"grid")}).on("click",".tabList",function(i){h.gridListViewToggleClickCb(i,"list")})};b.gridListViewToggleClickCb=function(k,h){var i=h,j=(h=="grid"?"list":"grid");this.$skuListProducts.removeClass(j+"_view").addClass(i+"_view");this.$parentContainer.find("span.tab"+j.charAt(0).toUpperCase()+j.slice(1)).removeClass("isActive");this.$parentContainer.find("span.tab"+i.charAt(0).toUpperCase()+i.slice(1)).addClass("isActive");if(coreMetricsEnabled){cmCreateElementTag(i+"_view","Site Wide Elements")}common_utils.setCookie("skuList",i+"_view");if(h==="grid"){b.adjustGridViewHeightCss()}else{b.adjustListViewHeightCss()}b.toggleAddToCartInputNames(i)};b.adjustListViewHeightCss=function(){this.$parentContainer.find(".skuListRow").each(function(h){e(this).find(b.elementsToAdjust.join()).removeAttr("style")})};b.adjustGridViewHeightCss=function(){var i=e("#skuListProducts"),h,k,j;if(typeof i.data("gridViewItemHeights0")!=="undefined"){this.adjustGridViewHeightCssFromCache()}else{h=b.elementsToAdjust.length;k=0;i.find(".skuListRow").each(function(o){var n=e(this),l,m=0;for(;m<h;m++){l=n.find(b.elementsToAdjust[m]);j=l.css("min-height","0").map(function(){return e(this).height()}).get();l.css("height",Math.max.apply(this,j)+"px");i.data("gridViewItemHeights"+k,Math.max.apply(this,j));if((b.elementsToAdjust[m]===".skuPriceBreak"||b.elementsToAdjust[m]===".skuListSavings")&&Math.max.apply(this,j)===0){l.css({margin:"0px"})}k++}})}};b.adjustGridViewHeightCssFromCache=function(){var i=e("#skuListProducts"),h=b.elementsToAdjust.length,j=0;i.find(".skuListRow").each(function(n){var m=e(this),l=0,k;for(;l<h;l++){k=parseInt(i.data("gridViewItemHeights"+j),10);m.find(b.elementsToAdjust[l]).css({minHeight:0,height:parseInt(k,10)});j++}})};b.toggleAddToCartInputNames=function(h){var i,j;if(h==="list"){i=this.$skuListProducts.find(".skuAddToCartWrapperListView").find(".quantityField input, .addtocart input");j=this.$skuListProducts.find(".skuAddToCartWrapperGridView").find(".quantityField input, .addtocart input")}else{i=this.$skuListProducts.find(".skuAddToCartWrapperGridView").find(".quantityField input, .addtocart input");j=this.$skuListProducts.find(".skuAddToCartWrapperListView").find(".quantityField input, .addtocart input")}j.each(function(){var k=e(this);if(typeof k.attr("origName")==="undefined"){k.attr("origName",this.name).removeAttr("name")}else{k.removeAttr("name")}});i.each(function(){var k=e(this);if(typeof k.attr("origName")!=="undefined"){this.name=k.attr("origName")}})};d.defaults={parentContainerSel:"#skuListContent",compareMaxSize:4};d.totalBubbles=0;d.isGettingComparison=false;d.init=function(h){var i=e.extend({},this.defaults,h);if(this.validate(i)){this.$parentContainer=e(i.parentContainerSel);this.compareMaxSize=i.compareMaxSize;this.showBubbles(parseInt(e("#c_sku_size").text().trim(),10));this.selectCheckboxesOnPageStart();this.eventListeners()}else{this.Utils.errorHandler(1,"Error Validating compare")}};d.validate=function(h){if((typeof h.parentContainerSel!=="string")||(e(h.parentContainerSel).length<=0)){return false}else{if(isNaN(h.compareMaxSize)||parseInt(h.compareMaxSize,10)>5||parseInt(h.compareMaxSize,10)<0){return false}}return true};d.eventListeners=function(){var h=this.$parentContainer;h.find(".compareSubmit").on("click keypress",this.compareSubmitClickCb);h.find(".paging").on("click",this.checkSelectedComparisons);h.find("select.sorter").on("change",this.checkSelectedComparisons);h.on("click","input.compare_checkbox",this.compareCheckboxClickCb);e("#searchRefine").on("click","#comparemaxBody .removeCompareItem",this.removeCompareItemClickCb).on("click","#compareYesNoDialog #no",this.compareNoForwardClickCb).on("click","#compareYesNoDialog #yes",this.compareYesForwardClickCb).on("click","#cancelAdd",this.compareCancel)};d.compareSubmitClickCb=function(j){var h=[],k=e("body"),i=d.$parentContainer,l;j.preventDefault();if(j.type==="keypress"){l=parseInt((j.keyCode?j.keyCode:j.which?j.which:j.charCode),10);if(l!==13&&l!==32){return false}}i.find(".compare_checkbox:checked").each(function(){var n=this.id,m=n.replace("checkbox_","#sku_");h.push(i.find(".skuListSku").find(m).val())});k.addClass("cursorWait");e(document).one("ajaxComplete",function(){k.removeClass("cursorWait")});e.getJSON(common_utils.appendSessionId("/mobile/comparison.do?action=itemInfo&sku="+h.join()),function(o){var n=o.object,m=parseInt(n.size,10);if(d.checkCompareItemLength(m)){if(d.isGettingComparison){return}d.isGettingComparison=true;d.linkClickTag();e("#skuListFormID").append('<input id="jsCompare" type="hidden" name="cmd_compare" value="1"/>').submit()}})};d.compareCheckboxClickCb=function(){var i=this,j=i.parentNode.id.replace("checkbox_",""),h=e(this).siblings("label");if(!i.checked){e.getJSON(common_utils.appendSessionId("/mobile/comparison.do?action=remove&sku="+j));h.text(e("#compare_text").text()).removeClass("compareRemove");d.showBubbles(--d.totalBubbles)}else{h.text(e("#compare_already_compare").text()).addClass("compareRemove");d.showBubbles(++d.totalBubbles)}};d.checkCompareItemLength=function(h){if(h<2||isNaN(h)){e('<p class="notEnoughItems">'+e("#compare_not_enough_items_error").text()+"</p>").dialog({cache:true,closeText:e("#compareLightboxCloseText").val(),dialogId:"notEnoughItemsDialog",fixedPosition:false,title:e("#compare_error_header").text(),width:525});return false}else{if(h>d.compareMaxSize){e('<div id="comparemax"></div>').dialog({ajax:{loadingMsg:e("#compare_error_pleasewait").text(),url:common_utils.appendSessionId("/ajaxhtml/compareMaxNew.do"),success:function(i){if(browser.msie&&parseInt(browser.version,10)===9){e("#comparemaxBody").find(".ui-dialog-titlebar").off("click mousedown")}e(this).show("blind",{direction:"vertical"},1000)}},cache:true,closeText:e("#compareLightboxCloseText").val(),dialogId:"comparemaxBody",fixedPosition:false,title:e("#compare_error_header").text(),width:525});return false}else{return true}}};d.selectCheckboxesOnPageStart=function(){var h=e("#skuListContent").find(".hidden").find(".c_sku").map(function(){return e.trim(this.innerHTML)}).get();if(h.length>0){this.checkPrevCheckboxes(h)}};d.linkClickTag=function(){var h="&",i=document.location.href;if(i.indexOf("?")==-1){h="?"}if(coreMetricsEnabled){cmCreateManualLinkClickTag(i+h+"cm_sp=Search-_-Results-_-CompareSelected","CompareSelected")}};d.checkPrevCheckboxes=function(j){var k=j.length,h=0;for(;h<k;h++){e("#checkbox_"+j[h].trim()).find("input").prop("checked",true).next("label").text(e("#compare_already_compare").text()).addClass("compareRemove").attr("id",j[h])}};d.checkSelectedComparisons=function(j){var h=[],i=j.target.value||j.target.href;j.preventDefault();e("#skuListFormID").find(".compare_checkbox:checked").each(function(l){var k=this,n=k.id.replace("checkbox_",""),m=document.getElementById("sku_"+n).value;h.push(m)});if(h.length>0){d.askAddQuestion(i,h);return false}else{window.location.href=i}};d.removeCompareItemClickCb=function(k){var j=e(this),i=e("#comparemaxBody"),h=j.attr("skuIndex"),l=j.attr("skuId");i.find("#compareItem"+h).slideUp(800,function(){e.getJSON(common_utils.appendSessionId("/mobile/comparison.do?action=remove&sku="+l),function(o){var q=e("#skuListFormID"),p=e("body"),m=o.object,n=parseInt(e("#cmp_size").text(),10),r=parseInt(e("#cmp_oversize").text(),10);if(m<=d.compareMaxSize){i.find(".compareItem").each(function(){e(this).fadeOut(2000,function(){e(this).remove()});p.addClass("cursorWait");e(document).one("ajaxComplete",function(){p.removeClass("cursorWait")})});i.find("#comparemaxFooter").text(e("button",this).text()+q.find("#compare_error_redirect").text());q.find(".compare_checkbox").prop("disabled",true);q.append('<input id="jsCompare" type="hidden" name="cmd_compare" value="1"/>').submit()}else{e("#cmp_size").text(n-1);e("#cmp_oversize").text(r-1)}})})};d.compareNoForwardClickCb=function(){window.location.href=e("#c_forward").text();e(this).closest("div.ui-dialog-content").dialog("close")};d.compareYesForwardClickCb=function(){var h=e("#c_addedSkus").text(),i=e("#c_forward").text(),k=h.split(","),j=e(this);e.getJSON(common_utils.appendSessionId("/mobile/comparison.do?action=add&sku="+k.join()),function(){window.location.href=i;j.closest("div.ui-dialog-content").dialog("close")})};d.compareCancel=function(){e(this).closest("div.ui-dialog-content").dialog("close")};d.askAddQuestion=function(i,h){var k="",j=0,l=h.length;e('<div id="compareYesNo"></div>').dialog({ajax:{loadingMsg:e("#compare_error_pleasewait").text(),url:common_utils.appendSessionId("/ajaxhtml/compareYesNo.do"),complete:function(m){e("#c_forward").text(i);e("#c_addedSkus").text(k)}},cache:true,closeText:e("#compareLightboxCloseText").val(),dialogId:"compareYesNoDialog",title:e("#compare_paging_header").text(),width:400});for(;j<l;j++){k+=h[j];if(j+1<l){k+=","}}};d.showBubbles=function(h){var i=0;switch(h){case 0:i=-55;break;case 1:i=-44;break;case 2:i=-33;break;case 3:i=-22;break;case 4:i=-11;break;case 5:i=0;break;default:i=0;break}e("#skuListContent").find(".compareCounter").css("background-position",i+"px 50%");this.totalBubbles=h};d.populateTranslations=function(){e("#senderName").attr("value",e.trim(e("#userName").text())).attr("tabindex",window.tabindex++);e("#mailFrom").attr("value",e.trim(e("#emailAddress").text())).attr("tabindex",window.tabindex++);e("#mailTo").attr("tabindex",window.tabindex++);e("#mailBody").attr("tabindex",window.tabindex++)};return{general:function(h){return a.init(h)},refinements:function(h){return f.init(h)},gridListViews:function(h){return b.init(h)},compare:function(h){return d.init(h)}}}(jQuery||{},App||{}));$(function(){switch(document.body.id||""){case"searchRefine":VKG.SkuList.general();VKG.SkuList.refinements();VKG.SkuList.gridListViews();VKG.SkuList.compare();break;case"cspItems":VKG.SkuList.general();VKG.SkuList.gridListViews();break;default:VKG.SkuList.general();VKG.SkuList.refinements();VKG.SkuList.gridListViews();VKG.SkuList.compare();break}});function throwElementTag(b,c){var a=$("#skuId").val();if(c!="firstTab"){if(coreMetricsEnabled){cmCreatePageElementTag(b,c,a)}}}function throwSearchRefinementElementTag(c,e,d){var a="Search";var b="";if(typeof c=="undefined"||c.indexOf("browse")>-1){a="Browse"}if(!!e&&(e.indexOf("ref_el_")>-1)){e=e.substring(7,e.length)}b=$(".lastBreadCrumb:last","#siteBreadcrumb").text();if(coreMetricsEnabled){cmCreatePageElementTag(a,"Refinements","''","''","''"," -_-"+e+"-_-"+d+"-_- -_-"+b)}}function throwProductViewTag(e,d){var b=$("#productViewTag").text();b=b.replace("*rating*",d);b=b.replace("*count*",e);var c="<input type='hidden' name='avgRating' value='"+d+"'><input type='hidden' name='totalReviewCount' value='"+e+"'>";$("#mainSkuForm").append(c);var a=b.split("|||");if(coreMetricsEnabled){cmCreateProductviewTag(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}}function validQuantity(b){var c=new RegExp("^[0-9]+$");var a=c.test(b);return a}function getBVRatingImage(a){return $("#bvPath").html()+"/"+$("#bvContext").html()+"/"+a+"/ratings.gif"}function declinePPP(a){if(a=="lightbox"){if(coreMetricsEnabled){cmCreatePageElementTag("intlbox_ppp_decl","intlbox_ppp_action")}}else{if(coreMetricsEnabled){cmCreatePageElementTag("int_ppp_decl","int_ppp_action")}}}function acceptPPP(a){if(a=="lightbox"){if(coreMetricsEnabled){cmCreatePageElementTag("intlbox_ppp_acc","intlbox_ppp_action")}}else{if(coreMetricsEnabled){cmCreatePageElementTag("int_ppp_acc","int_ppp_action")}}}function throwCMTag4ViewPaperProds(){if(coreMetricsEnabled){cmCreatePageElementTag("SHOP:CATEGORY:BN:PAPER_PRODUCTS","TBD")}}function mainColumnContentTab(a){if(coreMetricsEnabled){cmCreatePageElementTag(a,"TBD")}}function throwCMTag4ViewPaperProds(){if(coreMetricsEnabled){cmCreatePageElementTag("SHOP:CATEGORY:BN:PAPER_PRODUCTS","TBD")}}function mainColumnContentTab(a){if(coreMetricsEnabled){cmCreatePageElementTag(a,"TBD")}}function throwCMTag4ViewPaperProds(){if(coreMetricsEnabled){cmCreatePageElementTag("SHOP:CATEGORY:BN:PAPER_PRODUCTS","TBD")}}function mainColumnContentTab(a){if(coreMetricsEnabled){cmCreatePageElementTag(a,"TBD")}}function handleCmForAddToLinks(b){if(coreMetricsEnabled){var a="";if(b=="Add to Trolley Main"){a="addtotrolleymain"}else{if(b=="Add to List"){a="addtolist"}else{if(b=="Add to Favorites"){a="addtofavorites"}}}cmCreateManualLinkClickTag("/catalog/skuRouter.do?cm_sp=skupage-_-addtolinks-_-"+a,b);cmCreateElementTag(b,"Product Page Elements")}}function handleCmForAddToLinksRedesign(b){if(coreMetricsEnabled){var a="";if(b=="Add to List"){a="Summary"}cmCreateManualLinkClickTag("/catalog/skuRouter.do?cm_sp=AddtoList-_-ProductPage-_-"+a,b)}}function chkStockAndLoc(){if(coreMetricsEnabled){var a=$("#skuNumber").text();var b=$("#vendorName").text().trim();cmCreatePageElementTag("SD:CKLOCAL:LK:"+b+":"+a,"SKU_DETAILS")}};